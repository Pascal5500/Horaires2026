<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Horaires - D√©partement</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=3.0">

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    
    <script>
     // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyDIMwFfRqgkraB55_aPFZDq-IgOKzDXo0A",
  authDomain: "horaire-marthelinois.firebaseapp.com",
  databaseURL: "https://horaire-marthelinois-default-rtdb.firebaseio.com",
  projectId: "horaire-marthelinois",
  storageBucket: "horaire-marthelinois.firebasestorage.app",
  messagingSenderId: "1040288155989",
  appId: "1:1040288155989:web:a53015946b9f0210ef47dc"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);

      // R√©f√©rence √† la base de donn√©es (pour le code JS)
      const db = firebase.database();
    </script>
</head>
<body>

<div class="container my-5">
    
    <div class="d-flex justify-content-center align-items-center mb-4">
    
        <h1 class="text-center pt-3 mb-0 ms-3">Gestionnaire des horaires Golf Marthelinois</h1>
    </div>
    
    <div id="controlContainer">
        
        <div class="d-flex justify-content-between align-items-center mb-3 p-3 bg-light rounded shadow-sm">
            
            <div class="d-flex align-items-center">
                <button class="btn btn-primary me-2" onclick="changeWeek(-1)">‚óÄ Pr√©c√©dent</button>
                
                <label for="startDate" class="form-label me-2 mb-0 fw-bold">D√©but de la semaine :</label>
                <input type="date" id="startDate" class="form-control me-3" style="width: 200px;" onchange="generateSchedule()">
                
                <button class="btn btn-primary" onclick="changeWeek(1)">Suivant ‚ñ∂</button>
            </div>

            <div class="d-flex align-items-center">
                <label for="deptSelector" class="form-label me-2 mb-0">Action par d√©partement:</label>
                <select id="deptSelector" class="form-select me-2" style="width: 180px;">
                    <option value="all">Tout l'horaire</option>
                    <option value="Accueil">Pr√©pos√© √† l'acceuil</option>
                    <option value="D√©parts">Pr√©pos√© aux d√©parts</option>
                    <option value="Terrain">Pr√©pos√© terrain</option>
                    <option value="Carts">Pr√©pos√© aux Carts</option>
                </select>
                <button class="btn btn-info me-2" onclick="printSchedule()">Imprimer üñ®Ô∏è</button>
                <button class="btn btn-success" onclick="exportPDF()">Exporter PDF üíæ</button>
            </div>
            
        </div>
        
        <div class="d-flex justify-content-center flex-wrap gap-2 mb-4 p-3 border rounded bg-white shadow-sm">
            <button class="btn btn-sm btn-outline-dark active" data-filter="all" onclick="filterByButton(this, 'all')">Afficher Tous</button>
            <button class="btn btn-sm btn-outline-dark" data-filter="Accueil" onclick="filterByButton(this, 'Accueil')">Pr√©pos√© √† l'acceuil</button>
            <button class="btn btn-sm btn-outline-dark" data-filter="D√©parts" onclick="filterByButton(this, 'D√©parts')">Pr√©pos√© aux d√©parts</button>
            <button class="btn btn-sm btn-outline-dark" data-filter="Terrain" onclick="filterByButton(this, 'Terrain')">Pr√©pos√© terrain</button>
            <button class="btn btn-sm btn-outline-dark" data-filter="Carts" onclick="filterByButton(this, 'Carts')">Pr√©pos√© aux Carts</button>
        </div>
        
        <div class="d-flex justify-content-end mb-3">
            <div class="input-group" style="width: 350px;">
                <input type="password" id="adminPassword" class="form-control" placeholder="">
                <button id="adminAuthButton" class="btn btn-danger" onclick="authenticateAdmin()">Activer Admin</button>
            </div>
        </div>
        
        <div id="adminPanel" class="p-4 mb-4 bg-warning-subtle border border-warning rounded" style="display: none;">
            <h2 class="h4 d-flex justify-content-between">
                üõ†Ô∏è Administration 
                <button class="btn btn-sm btn-danger" onclick="disableAdminMode()">D√©sactiver Admin</button>
            </h2>
            <hr>
            
            <div class="mb-3">
                <h3 class="h6">G√©rer les Plages Horaires (ex: 8h-16h, Cong√©, Ferm√©)</h3>
                <div class="input-group">
                    <input type="text" id="newShift" class="form-control" placeholder="Nouvelle plage horaire">
                    <button class="btn btn-warning" onclick="addShift()">Ajouter Plage</button>
                </div>
                <ul id="shiftsList" class="list-group mt-2"></ul>
            </div>

            <h3 class="h6">Ajouter un Employ√©</h3>
            <div class="input-group mb-3">
                <input type="text" id="newEmployeeName" class="form-control" placeholder="Nom de l'employ√©">
                <select id="newEmployeeDept" class="form-select">
                    <option value="Accueil">Pr√©pos√© √† l'acceuil</option>
                    <option value="D√©parts">Pr√©pos√© aux d√©parts</option>
                    <option value="Terrain">Pr√©pos√© terrain</option>
                    <option value="Carts">Pr√©pos√© aux Carts</option>
                </select>
                <button class="btn btn-primary" onclick="addEmployee()">Ajouter Employ√©</button>
            </div>
            
            <h3 class="h6 mt-3">Liste des Employ√©s (par D√©partement)</h3>
            <div id="employeesListContainer" class="row">
                </div>
        </div>
    </div> <div class="table-responsive shadow-lg rounded">
        <table id="scheduleTable" class="table table-bordered table-striped align-middle text-center">
            
            <thead class="table-dark">
                <tr id="tableHeader">
                    <th>Employ√©</th>
                </tr>
            </thead>
            
            <tbody id="tableBody">
                </tbody>
        </table>
    </div>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="script.js?v=3.0"></script>
</body>
</html>